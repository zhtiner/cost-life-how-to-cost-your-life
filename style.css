:root{
  --bg:#f6f7fb;
  --card:#ffffff;
  --text:#23314a;
  --muted:#70839e;
  --primary:#7bc5c1; /* 薄荷 */
  --primary-weak:#e7f6f5;
  --accent:#a2b7ff;  /* 浅蓝 */
  --pink:#ffc6d0;    /* 浅粉 */
  --warn:#ff8a8a;
  --shadow:0 8px 24px rgba(35,49,74,0.08);
  --radius:16px;
  --radius-sm:12px;
}

/* 基础 */
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:"Inter","Noto Sans SC",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;line-height:1.4}
img{display:block;max-width:100%;border-radius:12px}
button,input,select{font-family:inherit;color:inherit}
button{cursor:pointer}
.hidden{display:none!important}

/* App 容器：基准宽度 375px，自适应 */
.app{max-width:440px;margin:0 auto;padding-bottom:74px}

/* 顶部栏 */
.app-header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,#f7fbfb,rgba(247,251,251,0));padding:18px 16px 8px}
.title-wrap h1{margin:0;font-size:20px;font-weight:700;letter-spacing:0.3px}
.subtitle{display:inline-block;margin-top:4px;font-size:12px;color:var(--muted);background:var(--primary-weak);padding:2px 8px;border-radius:999px}

/* 预警横幅 */
.warning-banner{position:sticky;top:0;z-index:20;display:flex;align-items:center;gap:10px;background:linear-gradient(90deg,#fff2f2,#ffecec);color:#8d2a2a;border:1px solid #ffd2d2;padding:10px 12px}
.warning-banner i{font-size:18px}
.wb-text{flex:1;line-height:1.2}
.wb-close{border:none;background:transparent;color:inherit;padding:6px;border-radius:10px}
.wb-close:active{opacity:.7}

/* 卡片 & 区块 */
.section{padding:14px 16px}
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow)}
.sec-head{display:flex;align-items:center;justify-content:space-between;gap:12px}
.sec-head h2{margin:0;font-size:16px}
.sec-title{margin:4px 0 12px 0;font-size:16px}
.link-btn{border:none;background:transparent;color:#3a7f7b;padding:6px 10px;border-radius:10px}
.link-btn:active{background:var(--primary-weak)}
.help-note{margin:8px 2px 0 2px;color:var(--muted);font-size:12px}

/* 预算进度条 */
.budget-bars{display:flex;flex-direction:column;gap:10px;margin-top:8px}
.budget-item{display:flex;gap:10px;align-items:center}
.budget-item .label{width:64px;font-size:13px;color:#446}
.progress{flex:1;height:10px;background:#f0f3f7;border-radius:999px;overflow:hidden;position:relative}
.progress .bar{height:100%;background:linear-gradient(90deg,var(--primary),#9fe1dd);width:0%;transition:width .5s ease}
.progress.over .bar{background:linear-gradient(90deg,var(--warn),#ffb1b1)}
.progress .text{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:11px;color:#335}

/* 记录列表 */
.filters select{border:1px solid #e3e7ee;border-radius:12px;padding:8px 12px;background:#fff;outline:none}
.record-list{display:flex;flex-direction:column;gap:12px;margin-top:8px}
.record-card{display:flex;gap:10px;background:linear-gradient(180deg,#fff, #fbfdff);border-radius:14px;box-shadow:var(--shadow);padding:10px;align-items:center;transform:translateY(6px);opacity:0;animation:cardIn .5s ease forwards}
.record-thumb{width:64px;height:64px;border-radius:12px;object-fit:cover;background:#f2f4f8}
.record-info{flex:1;min-width:0}
.record-top{display:flex;justify-content:space-between;gap:8px}
.amount{font-weight:700}
.category{font-size:12px;color:#456;background:#eef6ff;border-radius:999px;padding:2px 8px}
.note{color:#3a4a66;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin:4px 0 2px 0}
.meta{font-size:12px;color:var(--muted);display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.mood-chip{font-size:11px;color:#5d3;background:#f9f1ff;border:1px dashed #e7d7ff;padding:2px 6px;border-radius:999px}

/* 动态流 / 相册 */
.tabs{gap:10px}
.tab-btn{border:none;background:#eff6f6;padding:8px 14px;border-radius:999px;color:#3a7f7b}
.tab-btn.active{background:linear-gradient(90deg,#dff2f0,#f0f9f8);box-shadow:0 4px 10px rgba(0,0,0,0.04)}
.life-feed{display:flex;flex-direction:column;gap:12px}
.life-gallery{columns:2;column-gap:10px}
.life-gallery .gimg{break-inside:avoid;margin-bottom:10px;border-radius:12px;box-shadow:var(--shadow);transition:transform .2s}
.life-gallery .gimg:active{transform:scale(.98)}

/* 快速记账表单 */
.add-form{display:flex;flex-direction:column;gap:10px}
.form-row{display:flex;flex-direction:column;gap:6px}
.form-row.two{flex-direction:row;gap:10px}
.form-row.two>div{flex:1}
.add-form input[type="number"], .add-form input[type="text"], .add-form select{
  border:1px solid #e3e7ee;border-radius:12px;padding:12px;background:#fff;outline:none
}
.img-label{display:inline-flex;align-items:center;gap:6px;border:1px dashed #c9d6de;background:#f7fbfb;color:#3a7f7b;padding:8px 12px;border-radius:12px;cursor:pointer}
.img-preview{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
.img-preview img{width:56px;height:56px;object-fit:cover;border-radius:10px}

.btn-primary{border:none;background:linear-gradient(90deg,#7bc5c1,#a2e1de);color:#0f3;padding:12px;border-radius:14px;font-weight:700}
.btn-primary:active{opacity:.9}
.btn-ghost{border:1px solid #e3e7ee;background:#fff;color:#345;padding:10px 12px;border-radius:12px}

/* 统计图 */
.chart-wrap{padding:6px 6px 12px 6px}
.segmented{display:flex;gap:8px}
.seg{border:none;background:#eff6f6;padding:6px 12px;border-radius:999px}
.seg.active{background:linear-gradient(90deg,#dff2f0,#f0f9f8);box-shadow:0 4px 10px rgba(0,0,0,0.04)}
.chart-tip{margin:0 4px 8px;color:var(--muted);font-size:12px}

/* 心情分析 */
.mood-stats{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.stat-box{background:#f9fbff;border:1px solid #ecf2ff;border-radius:12px;padding:10px}
.kws{display:flex;flex-wrap:wrap;gap:6px}
.kw{font-size:12px;background:#fff;border:1px solid #eaeef7;border-radius:999px;padding:2px 8px}

/* 设置 */
.budget-form{display:flex;flex-direction:column;gap:10px}
.budget-row{display:flex;gap:10px;align-items:center}
.budget-row label{width:64px}
.budget-row input{flex:1;border:1px solid #e3e7ee;border-radius:12px;padding:10px;}

/* 底部导航 */
.tabbar{position:fixed;left:0;right:0;bottom:0;height:64px;background:#fff;border-top:1px solid #eef2f6;display:flex;justify-content:space-around;align-items:center;z-index:10}
.tab-item{display:flex;flex-direction:column;align-items:center;gap:4px;border:none;background:transparent;color:#587}
.tab-item span{font-size:11px}
.tab-item.active{color:#2b6b66}

/* 模态框（图片预览） */
.modal{position:fixed;inset:0;z-index:30}
.modal .modal-mask{position:absolute;inset:0;background:rgba(0,0,0,.3);backdrop-filter:blur(2px)}
.modal-panel{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(92vw,420px);background:#fff;border-radius:16px;box-shadow:var(--shadow);padding:10px}
.modal-close{position:absolute;right:8px;top:8px;border:none;background:#fff;border-radius:999px;box-shadow:0 2px 10px rgba(0,0,0,0.1);padding:6px}
.modal img{width:100%;border-radius:12px}
.modal-info{font-size:14px;color:#345;margin-top:6px}

/* 动画 */
@keyframes cardIn{to{transform:translateY(0);opacity:1}}
.breathe-in{animation:breathe 3s ease-in-out infinite}
@keyframes breathe{
  0%{filter:drop-shadow(0 0 0 rgba(123,197,193,0))}
  50%{filter:drop-shadow(0 6px 10px rgba(123,197,193,0.15))}
  100%{filter:drop-shadow(0 0 0 rgba(123,197,193,0))}
}

/* 视图切换 */
.view{display:none;animation:fade .25s ease}
.view.active{display:block}
@keyframes fade{from{opacity:.5;transform:translateY(4px)}to{opacity:1;transform:none}}

/* 适配 & 文本溢出处理 */
h1,h2,h3,p,span,button{word-break:break-word}
code{background:#f3f6fb;border:1px solid #e6ecf7;padding:0 6px;border-radius:8px}
