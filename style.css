/* styles.css */
/* 基础变量与主题色 */
:root{
  --bg:#f7f7f5;
  --card:#ffffff;
  --text:#2b2b2b;
  --muted:#6f7b8a;
  --primary:#67c5b5;     /* 薄荷绿 */
  --primary-weak:#d9f3ee;
  --pink:#f7c8d0;        /* 浅粉 */
  --blue:#cfe7ff;        /* 浅蓝 */
  --cream:#f4efe6;       /* 米白 */
  --warning:#ffb84d;
  --danger:#ff6b6b;
  --shadow:0 8px 24px rgba(0,0,0,0.06);
  --radius:16px;
  --radius-sm:12px;
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{
  margin:0;
  background:linear-gradient(180deg,var(--bg),#fff 120%);
  color:var(--text);
  font-family:'Inter','Noto Sans SC',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}
img{display:block;max-width:100%}

/* App Layout */
#app{
  max-width:420px;
  margin:0 auto;
  min-height:100dvh;
  display:flex;
  flex-direction:column;
  background:transparent;
}

.app-header{
  position:sticky;top:0;z-index:5;
  background:linear-gradient(180deg,#fff,rgba(255,255,255,0.86));
  backdrop-filter:saturate(180%) blur(8px);
  padding:14px 16px 8px;
  box-shadow:0 1px 0 rgba(0,0,0,0.05);
}
.header-title{
  display:flex;align-items:center;gap:8px;
  font-weight:700;font-size:18px;
}
.header-title i{color:var(--primary)}

.alert-banner{
  display:flex;align-items:center;gap:10px;
  background:linear-gradient(90deg,var(--warning),#ffdca1);
  color:#4b3b22;
  border-radius:12px;
  padding:10px 12px;
  margin-top:10px;
  box-shadow:var(--shadow);
  animation:slideDown .4s ease-out;
}
.alert-banner.hidden{display:none}
.alert-banner .alert-text{flex:1;display:flex;flex-direction:column;line-height:1.2}
.alert-banner strong{font-size:14px}
.alert-banner span{font-size:12px;opacity:.9}
.alert-banner button{
  border:none;background:rgba(255,255,255,0.5);width:28px;height:28px;border-radius:50%
}

.view-container{flex:1;display:flex;flex-direction:column;padding:12px 12px 80px;}

/* Cards */
.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px;
}
.fade-in{animation:fadeIn .4s ease both}
.block-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.block-header .title{font-weight:700;display:flex;align-items:center;gap:6px}

/* 首页 */
.home-top{display:flex;flex-direction:column;gap:12px;margin-bottom:8px}
.month-summary{display:flex;gap:12px;align-items:center}
.summary-text{flex:1}
.summary-line{display:flex;align-items:center;justify-content:space-between;margin:6px 0}
.summary-line.small{font-size:12px;color:var(--muted)}
.summary-chart{width:40%}

.budget-block .progress-list{display:flex;flex-direction:column;gap:10px}
.progress-row{display:flex;align-items:center;gap:10px}
.progress-row .label{width:70px;font-size:12px;color:#4b5563}
.progress{
  flex:1;height:10px;background:#f1f5f9;border-radius:999px;overflow:hidden;position:relative
}
.progress span{
  position:absolute;left:0;top:0;height:100%;width:0;border-radius:999px;
  background:linear-gradient(90deg,var(--primary),#8fd7cc);
  transition:width .4s ease
}
.progress.over span{background:linear-gradient(90deg,var(--danger),#ff9a9a)}
.progress-legend{font-size:12px;color:var(--muted);min-width:70px;text-align:right}

.home-toolbar .select-row{display:flex;gap:10px}
.select-row select{
  appearance:none;border:none;background:#fff;padding:10px 12px;border-radius:12px;
  box-shadow:var(--shadow);font-size:14px
}
.select-row select:focus{outline:2px solid var(--primary-weak)}

.feed-list{display:flex;flex-direction:column;gap:12px;padding:6px 2px}
.feed-card{
  background:var(--card);border-radius:16px;box-shadow:var(--shadow);overflow:hidden;
  display:flex;gap:12px;padding:10px;align-items:center;
  animation:floatIn .5s ease both
}
.feed-thumb{width:64px;height:64px;border-radius:12px;object-fit:cover;background:#f3f4f6;flex-shrink:0}
.feed-main{flex:1;min-width:0}
.feed-title{display:flex;justify-content:space-between;align-items:center;font-weight:700}
.feed-sub{font-size:12px;color:var(--muted);margin-top:4px;display:flex;gap:8px;flex-wrap:wrap}
.amount{font-weight:800}
.amount.negative{color:#ef4444}
.chip{font-size:11px;padding:4px 8px;border-radius:999px;background:#f3f4f6}
.chip.pink{background:var(--pink)}
.chip.blue{background:var(--blue)}
.chip.mint{background:var(--primary-weak)}
.album-grid{
  display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin-top:6px
}
.album-item{position:relative;border-radius:10px;overflow:hidden;animation:fadeIn .4s ease both}
.album-item img{width:100%;height:100%;object-fit:cover;display:block;aspect-ratio:1/1}
.album-item .badge{
  position:absolute;left:6px;top:6px;background:rgba(0,0,0,.5);color:#fff;font-size:11px;
  padding:3px 6px;border-radius:999px
}

/* 记录表单 */
.form-card{display:flex;flex-direction:column;gap:10px}
.form-title{font-weight:700;margin-bottom:4px}
.form-field{display:flex;flex-direction:column;gap:6px}
.form-field input[type="number"],
.form-field textarea{
  border:none;background:#fff;border-radius:12px;padding:12px;box-shadow:var(--shadow);font-size:14px
}
.form-field textarea{resize:none}
.upload-row{display:flex;align-items:center;gap:10px}
.image-preview{position:relative;width:88px;height:88px;border-radius:12px;overflow:hidden;background:#f3f4f6;box-shadow:var(--shadow)}
.image-preview img{width:100%;height:100%;object-fit:cover}
.circle-btn{position:absolute;right:6px;top:6px;border:none;background:rgba(0,0,0,.5);color:#fff;width:26px;height:26px;border-radius:50%}
.primary-btn{
  width:100%;border:none;border-radius:14px;background:linear-gradient(90deg,#79d0c2,#67c5b5);
  color:#083; padding:12px 14px;font-weight:700;box-shadow:var(--shadow);color:#0b3f35
}
.primary-btn.full{margin-top:12px}
.link-btn{border:none;background:transparent;color:#0b3f35;font-weight:600}
.danger-btn.ghost{border:none;background:#fff;color:#cf2e2e;border-radius:10px;padding:8px 10px;box-shadow:var(--shadow)}

.chips{display:flex;gap:8px;flex-wrap:wrap}
.chip-btn{
  border:none;background:#fff;padding:8px 10px;border-radius:999px;box-shadow:var(--shadow);font-size:13px
}
.chip-btn.active{background:var(--primary-weak);color:#0b3f35}
.chips.mood .chip-btn{background:#fff}
.hidden{display:none !important}

/* 统计 */
.tabs{display:flex;gap:8px}
.tabs button{
  border:none;background:#eef2f7;color:#3b4552;padding:8px 12px;border-radius:999px
}
.tabs button.active{background:#cfe7ff;color:#0b3f35}
.hint{color:#64748b;margin-top:6px}
.mood-stats{display:flex;justify-content:space-between;gap:8px}
.mood-item{flex:1;background:#fff;border-radius:12px;box-shadow:var(--shadow);padding:10px;display:flex;flex-direction:column;gap:8px}
.mood-item span{font-size:12px;color:#6b7280}
.mood-item strong{font-size:16px}

/* 设置 */
.budget-form{display:flex;flex-direction:column;gap:10px}
.budget-row{
  display:flex;align-items:center;gap:10px;background:#fff;border-radius:12px;box-shadow:var(--shadow);
  padding:10px
}
.budget-row .label{width:90px}
.budget-row input{
  flex:1;border:none;background:#f6f8fa;padding:10px;border-radius:10px
}

/* Tabbar */
.tabbar{
  position:fixed;left:50%;transform:translateX(-50%);
  bottom:10px;z-index:10;background:#fff;display:flex;gap:6px;
  padding:6px; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,0.12);
  width:calc(100% - 24px); max-width:420px;
}
.tab-btn{
  flex:1;border:none;background:#fff;border-radius:12px;padding:10px 8px;display:flex;flex-direction:column;align-items:center;gap:4px
}
.tab-btn span{font-size:11px}
.tab-btn.active{background:var(--primary-weak);color:#0b3f35}

/* 通用视图切换 */
.view{display:none;animation:fadeIn .25s ease}
.view.active{display:block}

/* 动画 */
@keyframes fadeIn{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:none}}
@keyframes floatIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
@keyframes slideDown{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:none}}

/* 适配 */
@media (min-width:421px){
  .tabbar{bottom:16px}
}
